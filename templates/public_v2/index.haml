- extends "public_base_v2.html"

- load thumbnail humanize ureport compress i18n

- block content
  // latest poll
  - if latest_poll and latest_poll.get_first_question
    .bg-grid(class="md:flex")
      .flex-1.bg-dark1.text-white.p-home.vertical-angle
        .font-bold.text-l
          -trans "LATEST OPINION"

        .font-bold.text-4xl
          {{ latest_poll.title }}

        .font-alt.font-bold.italic.left-border
          {{ latest_poll.get_first_question.title }}

      .flex-1.p-home(class="md:border-t")
        %button.btn.bg-light1
          -trans "VIEW FULL RESULTS"

        %button.btn.bg-black.text-white
          -trans "ANSWER THE POLL"

  // ureporters graph
  .bg-black.text-light1.p-home.bg-white-u(class="md:flex")
    .flex-1.flex-center-y
      .font-bold.text-l
        -trans "U-REPORTERS IN"
        {{ org.name|upper }}

      .font-light.text-white.text-6xl
        {{ reporters|intcomma }}

      .font-bold.text-l
        %div
          -trans "PARTNERING WITH"
          %span.text-white {{global_counter|intcomma}}
          -trans "U-REPORTERS"

        %div
          -trans "IN"
          %span.text-white ??
          -trans "COUNTRIES WORLDWIDE"

    .flex-1.ml-4
      .flex
        .block.w-12.font-bold.mt-1
          -trans "AGES"
        #age-chart.flex-1.inline-block.h-64

  // join video and social
  %div(class="md:flex")
    .flex-1
      .bg-light1.p-home
        .text-3xl.font-bold.leading-tight.text-center
          Join U-Report by texting "JOIN" to 24453. You can make a difference today.

        .mt-4.text-center
          %a.btn.bg-black.text-white.text-xl(href="arst")
            JOIN NOW

      .bg-black.p-home.text-white
        .video
          <iframe width="560" height="349" src="https://www.youtube.com/embed/KdydDDitMHA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

    .flex-1
      .bg-white.p-home
        social stuff

  // featured-story-full
  %div.hidden.bg-squares(class="md:block")
    .flex
      .flex-1.h-20
      .flex-1.bg-dark1.h-20

    .flex
      .flex-1.h-10

      .flex-1.bg-dark1
        .bg-dark2.ml-20.mr-10.h-10
          &nbsp;

    %div
      .border-r-25rem.border-solid.border-dark1
        .border-r-25rem.border-solid.border-light1.flex
          .pl-10.flex.flex-col.justify-center(class="w-1/3")
            .block
              .font-bold.mb-4
                FEATURED STORY
              .font-bold.text-3xl.leading-tight.mb-4
                Tanzania Scouts to Speak out Through U-Report
              .block.mb-6
                Intro sentence that will tease the post and draw your interest to keep reading more about it.

              %a.btn.bg-black.text-white
                READ MORE

          .block.p-10.bg-white.flex.flex-col.justify-center(class="w-2/3")
            %img(src="{{ STATIC_URL }}img/missing_image_placeholder.jpg")

    .flex
      .flex-1.h-10

      .flex-1.bg-dark1
        .bg-dark2.ml-20.mr-10.h-10

    .flex
      .flex-1.h-20
      .flex-1.bg-dark1.h-20

  // featured-story-mobile
  %div(class="md:hidden")
    %img(src="{{ STATIC_URL }}img/missing_image_placeholder.jpg")
    .p-home
      .font-bold.mb-4
        FEATURED STORY
      .font-bold.text-3xl.leading-tight.mb-4
        Tanzania Scouts to Speak out Through U-Report
      .block.mb-6
        Intro sentence that will tease the post and draw your interest to keep reading more about it.

      %a.btn.bg-black.text-white
        READ MORE

  // world-map
  %div.text-white.pr-10.bg-black.p-home(class="md:flex")
    .flex.flex-center-y.my-4(class="md:w-3/5")
      %img(src="{{ STATIC_URL }}img/homemap_bg.png")

    .flex.flex-center-y(class="md:w-2/5")
      %div.pl-10
        .font-bold.mb-4.text-3xl.leading-tight
          We are all a part of a global platform changing the lives of young people worldwide.

        .mb-6
          We are all a part of a global platform changing the lives of young people worldwide.
          We are all a part of a global platform changing the lives of young people worldwide.

        %a.btn.bg-light1.text-black(href="arst")
          LEARN MORE

  // photos
  %div.text-white(class="md:flex")
    .flex-1.bg-dark2.p-home.flex.flex-col.justify-center
      %div
        .font-bold.text-3xl
          Photos Title

        This area can be edited when the poll is over to focus additionally on review and learnings.

    .flex-1.p-home.text-black.flex.flex-col.justify-center
      %div
        .inline-block.w-40.h-40.bg-gray-500.m-2
          photo-1
        .inline-block.w-40.h-40.bg-gray-500.m-2
          photo-2
        .inline-block.w-40.h-40.bg-gray-500.m-2
          photo-3

- block script
  {{ block.super }}

  :javascript
    $("#age-chart").each(function(){
       var data = {{ age_stats|safe }};

       {% if is_rtl_org %}
       data.reverse();
       {% endif %}

       var categories = [];

       for (i=0; i<data.length; i++) {
         categories.push(data[i].name)
       }

       $('#age-chart').highcharts({
         chart: {
           type: 'column',
           backgroundColor: 'transparent'
         },
         credits: {
           enabled: false
         },
         legend: {
           enabled: false
         },
         title: {
             text: null
         },
         xAxis: {
           opposite: true,
           categories: categories,
           lineColor: 'transparent',
           labels : {
             rotation: 0,
             style: {
               fontSize: 16,
               fontFamily: "Montserrat",
               fontWeight: 700,
               color: "#AAA"
             },
           },
         },
         yAxis: {
           visible: false,
         },
         tooltip: {
           enabled: false
         },
         plotOptions: {
             series: {
               borderWidth: 0
             },
             column: {
                 color: "#FFD100",
                 pointWidth: 40,

                 dataLabels:  {
                   enabled: true,
                   style: {
                     fontFamily: "Montserrat",
                     fontWeight: 700,
                     fontSize: "14px",
                   },
                   color: "#FFD100",
                   verticalAlign:"bottom",
                   format: '<b>{point.y:.0f}%</b>'
                 }
             }
         },
         series: [{name: 'Age', data: data}]
       });
     });